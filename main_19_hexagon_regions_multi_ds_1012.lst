GAMS 24.9.2  r64480 Released Nov 14, 2017 WEX-WEI x86 64bit/MS Windows 10/26/21 12:16:25 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


      This is the implementation of the MFD based perimeter control considering 
      Instanteneous Dynamic User Equilibrium (DCS part)
      Given the vehicle number, queue length, and demand profiles, this program 
      aims to find the shortest paths and assign the traffic accordingly
      July 26th, Qiangqiang Guo
   6   
   7  * settings and import parameters
   8  option limrow = 300, limcol = 100, solprint = on;
   9   
INCLUDE    D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 -
           PhD Dissertation\Codes\MFD_Codes_DQ\MFD-DQ\network_19_hexagon_regions
           _multi_ds_1012.gms
      Network configuration data file
      region and link sets are defined in this file, together with the data need
      ed to define the MFD function
  15   
  16  set nodes 'nodes set' /1*19/;
  17  alias(nodes, i, j, h, k);
  18  set desti(i) 'destination set' /13, 14, 15, 16, 17, 18, 19/;
  19  alias(desti, d, d2);
  20  set coff 'cofficient set' / m3, m2, m1, length, n_bar, m0/;
  21   
  22  parameter
  23           n(i,d) 'vehicle numbers in region i with destination d',
  24           q(i,j,d) 'queued vehicle numbers at the boundary of (i,j) with de
      stination d',
  25           v(i,j,d) 'region-inflow of region j from region i for vehicles wi
      th destination d',
  26           demand(i,d) 'demand from region i to d',
  27           MFD_Para(i, coff) 'cost parameter table';
  28   
GDXIN   D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 - Ph
        D Dissertation\Codes\MFD_Codes_DQ\MFD-DQ\MtoG2.gdx
--- LOAD  n = 1:n
--- LOAD  v = 4:v
--- LOAD  demand = 5:demand
--- LOAD  MFD_Para = 6:MFD_Para
  30  $LOAD n q v demand MFD_Para
****           $492
**** LINE     20 INCLUDE     D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ
                             ½Òµ{¸ê®Æ\CET 800 - PhD Dissertation\Codes\MFD_Codes
                             _DQ\MFD-DQ\network_19_hexagon_regions_multi_ds_1012
                             .gms
**** LINE     10 INPUT       D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ
                             ½Òµ{¸ê®Æ\CET 800 - PhD Dissertation\Codes\MFD_Codes
                             _DQ\MFD-DQ\main_19_hexagon_regions_multi_ds_1012.gm
                             s
  31   
  32  MFD_Para(j, 'm3')$(sum(d2, n(j,d2))>10000)=0;
  33  MFD_Para(j, 'm2')$(sum(d2, n(j,d2))>10000)=0;
  34  MFD_Para(j, 'm1')$(sum(d2, n(j,d2))>10000)=0;
  35  MFD_Para(j, 'm0')$(sum(d2, n(j,d2))>10000)=4256;
  36   
  37  parameter u_bar(i,j) 'the control limit at boundary (i,j)'
  38  /
  39  1.2   3
  40  1.12  3
  41  1.13  3
  42  2.1   3
  43  2.3   3
  44  2.13  3
  45  2.14  3
  46  3.2   3
  47  3.4   3
  48  3.14  3
  49  4.3   3
  50  4.5   3
  51  4.14  3
  52  4.15  3
  53  5.4   3
  54  5.6   3
  55  5.15  3
  56  6.5   3
  57  6.7   3
  58  6.15  3
  59  6.16  3
  60  7.6   3
  61  7.8   3
  62  7.16  3
  63  8.7   3
  64  8.9   3
  65  8.16  3
  66  8.17  3
  67  9.8   3
  68  9.10  3
  69  9.17  3
  70  10.9  3
  71  10.11 3
  72  10.17 3
  73  10.18 3
  74  11.10 3
  75  11.12 3
  76  11.18 3
  77  12.1  3
  78  12.11 3
  79  12.13 3
  80  12.18 3
  81  13.1  3
  82  13.2  3
  83  13.12 3
  84  13.14 4
  85  13.18 4
  86  13.19 5
  87  14.2  3
  88  14.3  3
  89  14.4  3
  90  14.13 4
  91  14.15 4
  92  14.19 4
  93  15.4  3
  94  15.5  3
  95  15.6  3
  96  15.14 4
  97  15.16 4
  98  15.19 5
  99  16.6  3
 100  16.7  3
 101  16.8  3
 102  16.15 4
 103  16.17 5
 104  16.19 5
 105  17.8  3
 106  17.9  3
 107  17.10 3
 108  17.16 4
 109  17.18 4
 110  17.19 5
 111  18.10 3
 112  18.11 3
 113  18.12 3
 114  18.13 4
 115  18.17 4
 116  18.19 5
 117  19.13 5
 118  19.14 5
 119  19.15 5
 120  19.16 5
 121  19.17 5
 122  19.18 5
 123  /;
 124   
 125  set region_communi(i,j) /
 126  1.2
 127  1.12
 128  1.13
 129  2.1
 130  2.3
 131  2.13
 132  2.14
 133  3.2
 134  3.4
 135  3.14
 136  4.3
 137  4.5
 138  4.14
 139  4.15
 140  5.4
 141  5.6
 142  5.15
 143  6.5
 144  6.7
 145  6.15
 146  6.16
 147  7.6
 148  7.8
 149  7.16
 150  8.7
 151  8.9
 152  8.16
 153  8.17
 154  9.8
 155  9.10
 156  9.17
 157  10.9
 158  10.11
 159  10.17
 160  10.18
 161  11.10
 162  11.12
 163  11.18
 164  12.1
 165  12.11
 166  12.13
 167  12.18
 168  13.1
 169  13.2
 170  13.12
 171  13.14
 172  13.18
 173  13.19
 174  14.2
 175  14.3
 176  14.4
 177  14.13
 178  14.15
 179  14.19
 180  15.4
 181  15.5
 182  15.6
 183  15.14
 184  15.16
 185  15.19
 186  16.6
 187  16.7
 188  16.8
 189  16.15
 190  16.17
 191  16.19
 192  17.8
 193  17.9
 194  17.10
 195  17.16
 196  17.18
 197  17.19
 198  18.10
 199  18.11
 200  18.12
 201  18.13
 202  18.17
 203  18.19
 204  19.13
 205  19.14
 206  19.15
 207  19.16
 208  19.17
 209  19.18
 210  /;
 211   
 212  *variables
 213  nonnegative variable
 214           theta(i,j,d) 'the queue inflow of the boundary (i,j)',
 215           eta(i,d) 'the minimum travel time from region i to destination',
 216           y(i,j) 'auxiliary variable for u(i,j)',
 217           lamda(i,j) 'auxiliary variable for u(i,j)',
 218           mu(i,j) 'auxiliary variable for u(i,j)' ;
 219   
 220  equations
 221           theta_com(i,j,d) 'the complimentary term of p(i,j,d)',
 222           eta_com(i,d) 'the complimentary term of eta(i,d)',
 223           y_com(i,j) 'the complimentary term of y(i,j)',
 224           lamda_com(i,j) 'the complimentary term of lamda(i,j)',
 225           mu_com(i,j) 'the complimentary term of mu(i,j)';
 226   
 227   
 228  * the DCS formulation
 229  theta_com(i,j,d)$region_communi(i,j) ..          MFD_Para(i, 'length')*sum
      (d2, n(i,d2))/(MFD_Para(i, 'm3')*power(sum(d2, n(i,d2)),3)+MFD_Para(i, 'm2
      ')*power(sum(d2, n(i,d2)),2)+MFD_Para(i, 'm1')*sum(d2, n(i,d2)) + MFD_Para
      (i, 'm0'))+ sum(d2, q(i,j,d2))/(y(i,j)*(MFD_Para(j, 'n_bar')-sum(d2, n(j,d
      2)))+0.1)+eta(j,d)-eta(i,d) =g= 0;
 230  eta_com(i,d)..                                   sum(region_communi(i,j), 
      theta(i,j,d))-sum(region_communi(k,i), v(k,i,d))-demand(i,d) =g= 0;
 231  *eta_com(i,d)..                                   (MFD_Para(i, 'm3')*power
      (sum(d2, n(i,d2)),3)+MFD_Para(i, 'm2')*power(sum(d2, n(i,d2)),2)+MFD_Para(
      i, 'm1')*sum(d2, n(i,d2)) + MFD_Para(i, 'm0'))/sum(d2, n(i,d2))*n(i,d)/MFD
      _Para(i, 'length') - sum(region_communi(i,j), p(i,j,d))=g= 0;
 232  y_com(i,j)$region_communi(i,j)..                 (lamda(i,j)-mu(i,j)-1)*(M
      FD_Para(j, 'n_bar')-sum(d2, n(j,d2))) =g= 0;
 233  lamda_com(i,j)$region_communi(i,j)..             u_bar(i,j)-y(i,j)*(MFD_Pa
      ra(j, 'n_bar')-sum(d2, n(j,d2))) =g= 0;
 234  mu_com(i,j)$region_communi(i,j)..                y(i,j)*(MFD_Para(j, 'n_ba
      r')-sum(d2, n(j,d2))) =g= 0;
 235   
 236  eta.fx(i,d)$(sameas(i,d))=0;
 237   
 238  * solve the problem
 239  model mfd / theta_com.theta, eta_com.eta, y_com.y, lamda_com.lamda, mu_com
      .mu /;
 240  solve mfd using mcp
 241   
 242  scalar Umodstat, Usolstat,Tmodstat, Tsolstat;
****       $257
**** LINE     42 INPUT       D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ
                             ½Òµ{¸ê®Æ\CET 800 - PhD Dissertation\Codes\MFD_Codes
                             _DQ\MFD-DQ\main_19_hexagon_regions_multi_ds_1012.gm
                             s
 243  Umodstat = mfd.Modelstat;
 244  Usolstat = mfd.solvestat;

**** LIST OF STRAY NAMES - CHECK DECLARATIONS FOR SPURIOUS COMMAS
**** STRAY NAME Tmodstat OF TYPE PARAM
**** STRAY NAME Tsolstat OF TYPE PARAM
GAMS 24.9.2  r64480 Released Nov 14, 2017 WEX-WEI x86 64bit/MS Windows 10/26/21 12:16:25 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Error Messages


257  Solve statement not checked because of previous errors
492  Symbol not in GDX

**** 2 ERROR(S)   0 WARNING(S)
GAMS 24.9.2  r64480 Released Nov 14, 2017 WEX-WEI x86 64bit/MS Windows 10/26/21 12:16:25 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  D:\OneDrive\Works with Ohay\Ohayªº¦UºØ
                                          ÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 - PhD Di
                                          ssertation\Codes\MFD_Codes_DQ\MFD-DQ\m
                                          ain_19_hexagon_regions_multi_ds_1012.g
                                          ms
     2       10 INCLUDE        1      10  .D:\OneDrive\Works with Ohay\Ohayªº¦Uº
                                           ØÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 - PhD 
                                           Dissertation\Codes\MFD_Codes_DQ\MFD-D
                                           Q\network_19_hexagon_regions_multi_ds
                                           _1012.gms
     3       29 GDXIN          2      19  .D:\OneDrive\Works with Ohay\Ohayªº¦Uº
                                           ØÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 - PhD 
                                           Dissertation\Codes\MFD_Codes_DQ\MFD-D
                                           Q\MtoG2.gdx


COMPILATION TIME     =        0.031 SECONDS      3 MB  24.9.2 r64480 WEX-WEI


USER: Small MUD - 5 User License                     G161020:1349AO-WIN
      University of Washington, Seattle, Civil and EnvironmentalDC12815
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 -
           PhD Dissertation\Codes\MFD_Codes_DQ\MFD-DQ\main_19_hexagon_regions_mu
           lti_ds_1012.gms
Output     D:\OneDrive\Works with Ohay\Ohayªº¦UºØÀÉ®×\¥X°êÅª®Ñ½Òµ{¸ê®Æ\CET 800 -
           PhD Dissertation\Codes\MFD_Codes_DQ\MFD-DQ\main_19_hexagon_regions_mu
           lti_ds_1012.lst

**** USER ERROR(S) ENCOUNTERED
